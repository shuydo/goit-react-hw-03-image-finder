(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{17:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(11),s=n.n(c),o=(n(17),n(10)),i=n(3),u=n.n(i),l=n(8),h=n(4),m=n(5),d=n(7),p=n(6),b=n(12),g=n.n(b),f=n(0);function j(t){var e=t.onSubmitDo;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("header",{className:"Searchbar",children:Object(f.jsxs)("form",{className:"SearchForm",onSubmit:function(t){t.preventDefault(),e(t.target.elements[1].value),t.target.elements[1].value=""},children:[Object(f.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(f.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(f.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})})}function O(t){var e=t.id,n=t.url,a=t.clickOnImg;return Object(f.jsx)("img",{className:"galleryImg",id:e,src:n,alt:"img",onClick:a})}function v(t){var e=t.imgs,n=t.clickOnGall;return Object(f.jsx)("ul",{className:"ImageGallery",children:e.map((function(t){var e=t.id,a=t.webformatURL;return Object(f.jsx)("li",{children:Object(f.jsx)(O,{id:e,url:a,clickOnImg:n})},e)}))})}var x=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).handleKeyDown=function(e){"Escape"===e.code&&t.props.onClose()},t.handleClickOnBD=function(e){e.target===e.currentTarget&&t.props.onClose()},t}return Object(m.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"Overlay",onClick:this.handleClickOnBD,children:Object(f.jsx)("div",{className:"Modal",children:Object(f.jsx)("img",{src:this.props.urlBigImg,alt:"oversize"})})})}}]),n}(a.Component),y="".concat("https://pixabay.com/api/?image_type=","photo&orientation=horizontal&key=").concat("21031732-6fee4eefe658f550324b0a29e","&per_page=12&q=");function w(t,e){return fetch("".concat(y).concat(t,"&page=").concat(e)).then((function(t){return t.json()})).then((function(t){return t.hits.map((function(t){return{id:t.id,webformatURL:t.webformatURL,largeImageURL:t.largeImageURL}}))}))}function k(t){var e=t.onClick;return Object(f.jsx)("button",{type:"button",className:"Button",onClick:e,children:"Load more"})}var S=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={query:null,curPage:1,imgs:[],modalImgId:null,showM:!1,status:!1},t.handleSubmit=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({query:n,curPage:1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.toggleModal=function(){return t.setState({showM:!t.state.showM})},t.handleMore=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState((function(t){return{curPage:t.curPage+1}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),t.handleTakeID=function(e){t.setState({modalImgId:+e.target.id}),t.toggleModal()},t}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){var t=Object(l.a)(u.a.mark((function t(e,n){var a,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.state,r=a.query,c=a.curPage,n.query===r){t.next=12;break}return t.t0=this,t.t1=o.a,t.next=7,w(r,c);case 7:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.t4={status:!0,imgs:t.t3},t.t0.setState.call(t.t0,t.t4),this.setState({status:!1});case 12:if(n.curPage===c){t.next=22;break}return t.t5=this,t.t6=o.a,t.next=17,w(r,c);case 17:t.t7=t.sent,t.t8=(0,t.t6)(t.t7),t.t9={status:!0,imgs:t.t8},t.t5.setState.call(t.t5,t.t9),this.setState({status:!1});case 22:window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});case 23:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e=this,n=this.state,a=this.handleTakeID,r=this.handleMore,c=this.toggleModal,s=n.imgs,o=n.status,i=n.showM,u=n.modalImgId;return Object(f.jsxs)("div",{className:"App",children:[o&&Object(f.jsx)(g.a,{className:"Loader",type:"Watch"}),Object(f.jsx)(j,{onSubmitDo:function(t){return e.setState({query:t})}}),!o&&s.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{imgs:s,clickOnGall:a}),Object(f.jsx)(k,{onClick:r})]}),i&&Object(f.jsx)(x,{urlBigImg:(t=u,s[s.map((function(t){return t.id})).indexOf(t)].largeImageURL),onClose:c})," "]})}}]),n}(a.Component);s.a.render(Object(f.jsxs)(r.a.StrictMode,{children:[Object(f.jsx)(S,{}),","]}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7389f882.chunk.js.map